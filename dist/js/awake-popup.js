"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,n){if(t){if("string"==typeof t)return _arrayLikeToArray(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(i="Object"===i&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,n):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,o=new Array(n);i<n;i++)o[i]=t[i];return o}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,n,i){return n&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),t}function _classPrivateMethodInitSpec(t,n){_checkPrivateRedeclaration(t,n),n.add(t)}function _checkPrivateRedeclaration(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateMethodGet(t,n,i){if(!n.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var _render=new WeakSet,_assign=new WeakSet,AwakePopup=function(){function i(t){var n;_classCallCheck(this,i),_classPrivateMethodInitSpec(this,_assign),_classPrivateMethodInitSpec(this,_render),this.$clickBtnSelector=t.clickButtonSelector,this.$clickBtnSelector&&(this.$button=document.querySelector(this.$clickBtnSelector)),this.$popup=null,this.$closeBtn=null,this.$body=document.querySelector("body"),this.$html=document.querySelector("html"),this.$options=t,this.$options.content=null!==(n=t.content)&&void 0!==n?n:"",this.$options.overlay=null!==(n=t.overlay)&&void 0!==n&&n,this.$options.closeButton=null!==(n=this.$options.closeButton)&&void 0!==n&&n,this.$buttons=null!==(n=t.buttons)&&void 0!==n&&n.length?t.buttons:[],this.$overlayClose=null===(n=t.overlayClose)||void 0===n||n,this.$scroll=null!==(n=t.noScroll)&&void 0!==n&&n,this.$position=null!==(n=t.position)&&void 0!==n&&n,this.$showAfter=t.showAfterMs,this.$animation=null!==(t=t.animation)&&void 0!==t&&t,this.$animationDurationOpen=this.$animation&&this.$animation.durationOpen?this.$animation.durationOpen/1e3:null,this.$animationDurationClose=this.$animation&&this.$animation.durationClose?this.$animation.durationClose/1e3:null,this.$content=null,_classPrivateMethodGet(this,_render,_render2).call(this),_classPrivateMethodGet(this,_assign,_assign2).call(this)}return _createClass(i,[{key:"animationOpen",value:function(){"zoom"===this.$animation.animationName&&(this.$content.style.transform="scale(1)",this.$content.style.transitionProperty="transform"),"fade"===this.$animation.animationName&&(this.$content.style.opacity="1",this.$content.style.transitionProperty="opacity"),this.$animationDurationOpen?(this.$content.style.transitionDuration=this.$animationDurationOpen+"s",this.$popup.style.transitionDuration=this.$animationDurationOpen+"s"):(this.$content.style.transitionDuration="0.2s",this.$popup.style.transitionDuration="0.2s")}},{key:"animationInitialized",value:function(){"zoom"===this.$animation.animationName&&(this.$content.style.transitionProperty="transform",this.$content.style.transform="scale(0)"),"fade"===this.$animation.animationName&&(this.$content.style.opacity="0",this.$content.style.transitionProperty="opacity"),this.$animationDurationClose?(this.$content.style.transitionDuration=this.$animationDurationClose+"s",this.$popup.style.transitionDuration=this.$animationDurationClose+"s"):(this.$content.style.transitionDuration="0.2s",this.$popup.style.transitionDuration="0.2s")}},{key:"customButtonHandler",value:function(t,n){n.handler(t,n)}},{key:"isOpen",get:function(){return this.$popup&&this.$popup.classList.contains("open")}},{key:"scrollbarWidth",get:function(){var t=document.createElement("div");t.style.overflowY="scroll",t.style.width="50px",t.style.height="50px",t.style.visibility="hidden",document.body.appendChild(t);var n=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),n}},{key:"closeButtonHandler",value:function(){this.close()}},{key:"overlayClickHandler",value:function(t){"popup-overlay"===t.target.dataset.type&&this.close()}},{key:"showAfterTimeout",value:function(){var t=this;setTimeout(function(){t.open()},this.$showAfter)}},{key:"clickHandler",value:function(){this.open()}},{key:"getPopupTemplate",value:function(t){var n,i;return 0<(null===(n=t.buttons)||void 0===n?void 0:n.length)&&(i=_toConsumableArray(t.buttons).map(function(t,n){var i;return'<button type="'.concat(null!==(i=t.buttonType)&&void 0!==i?i:"button",'" class="').concat(null!==(i=t.buttonClasses)&&void 0!==i&&i.length?t.buttonClasses.join(" "):"",'" data-index="').concat(n,'">').concat(t.buttonText,"</button>")})),'\n      <div class="awake-popup__content" data-type="content">\n        '.concat(t.closeButton?'<button class="awake-popup__close" data-close></button>':"","\n        ").concat(null!==(t=null==t?void 0:t.content)&&void 0!==t?t:"",'\n        <div class="awake-popup__custom-buttons">').concat(i?i.join(""):"","</div>\n     </div>\n    ")}},{key:"open",value:function(){var t;this.$popup.classList.add("open"),this.$position&&(t=this.scrollbarWidth,this.$content&&(this.$content.style.right=this.$position.right?2*this.$position.right-(+this.$position.right-+t)+"px":"unset")),this.$scroll&&(this.$html.style.paddingRight=this.scrollbarWidth+"px",this.$body.classList.add("no-overflow"),this.$html.classList.add("no-overflow")),this.$content&&this.animationOpen()}},{key:"close",value:function(){this.$popup.classList.remove("open"),this.$position&&(this.$content.style.left=this.$position.left?this.$position.left+"px":"unset",this.$content.style.right=this.$position.right?this.$position.right+"px":"unset"),this.$content&&this.animationInitialized(),this.$scroll&&(this.$html.style.paddingRight="0",this.$body.classList.remove("no-overflow"),this.$html.classList.remove("no-overflow"))}},{key:"destroy",value:function(){this.$button&&this.$button.removeEventListener("click",this.clickHandler),this.$popup.remove()}}]),i}();function _render2(){this.$popup=document.createElement("div"),this.$popup.classList.add("awake-popup"),this.$popup.setAttribute("data-type","popup-overlay"),this.$options.overlay&&this.$popup.classList.add("overlay"),this.$popup.innerHTML=this.getPopupTemplate(this.$options),this.$content=this.$popup.querySelector('div[data-type="content"]'),this.$position&&this.$content&&(this.$content.style.position="absolute",this.$content.style.top=this.$position.top?this.$position.top+"px":"unset",this.$content.style.left=this.$position.left?this.$position.left+"px":"unset",this.$content.style.bottom=this.$position.bottom?this.$position.bottom+"px":"unset",this.$content.style.right=this.$position.right?2*this.$position.right+"px":"unset"),this.$body.append(this.$popup),this.$showAfter&&this.showAfterTimeout(),this.$animation.animationName&&this.$content&&(this.$content.classList.add(this.$animation.animationName),this.animationInitialized())}function _assign2(){var i=this;this.clickHandler=this.clickHandler.bind(this),this.overlayClickHandler=this.overlayClickHandler.bind(this),this.closeButtonHandler=this.closeButtonHandler.bind(this),this.$button&&this.$button.addEventListener("click",this.clickHandler),this.$overlayClose&&!this.isOpen&&this.$popup&&this.$popup.addEventListener("click",this.overlayClickHandler),this.$options.closeButton&&(this.$closeBtn=this.$popup.querySelector("button[data-close]"),this.$closeBtn.addEventListener("click",this.closeButtonHandler)),this.$buttons.length&&this.$buttons.find(function(n,t){n.handler&&(i.customButtonHandler=i.customButtonHandler.bind(i),(t=i.$popup.querySelector('button[data-index="'.concat(t,'"]')))&&t.addEventListener(null!==(t=n.handlerType)&&void 0!==t?t:"click",function(t){return i.customButtonHandler(t,n)}))})}